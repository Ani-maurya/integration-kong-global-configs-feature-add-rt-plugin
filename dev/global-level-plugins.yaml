_format_version: "3.0"
add-plugins:
# correlation-id plugin configuration
- selectors:
  plugins:
  - config:
      echo_downstream: false
      generator: uuid
      header_name: x-uos-correlation-id
    enabled: true
    name: correlation-id
    ordering:
      before:
        access:
        - oas-validation
    protocols:
    - grpc
    - grpcs
    - http
    - https
# ip-restriction plugin configuration
- selectors:
  plugins:
  - config:
      allow:
      - 49.249.17.98
      deny: null
      message: The service is currently unavailable.
      status: null
    enabled: true
    name: ip-restriction
    protocols:
    - http
    - https
    - tcp
    - tls
    - grpc
    - grpcs
# rate-limiting plugin configuration
- selectors:
  plugins:
  - config:
      day: null
      error_code: 429
      error_message: API rate limit exceeded
      fault_tolerant: true
      header_name: null
      hide_client_headers: false
      hour: null
      limit_by: consumer
      minute: null
      month: null
      path: null
      policy: local
      redis_database: 0
      redis_host: null
      redis_password: null
      redis_port: 6379
      redis_server_name: null
      redis_ssl: false
      redis_ssl_verify: false
      redis_timeout: 2000
      redis_username: null
      second: 100
      year: null
    enabled: true
    name: rate-limiting
    protocols:
    - grpc
    - grpcs
    - http
    - https  
# request-size-limiting plugin configuration
- selectors:
  plugins:
  - config:
      allowed_payload_size: 100
      require_content_length: false
      size_unit: kilobytes
    enabled: true
    name: request-size-limiting
    protocols:
    - grpc
    - grpcs
    - http
    - https